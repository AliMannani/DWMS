<script type="text/javascript">
function do_ajax(ajaxURL) {
    $("#content_page").html("Loading...");
    $.ajax({
        type: "get",
        url: ajaxURL,
        dataType: "json",
        success: function(data) {
            $("#content_page").html(data);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            console.log("Error:Ajax_Content_Load" + errorThrown);
            console.log("XMLHttpRequest.status:" + XMLHttpRequest.status);
            console.log("XMLHttpRequest.readyState:" + XMLHttpRequest.readyState);
            console.log("textStatus:" + textStatus);
        }
    });
}

function refresh_sidebar(itemID) {
    $(".DWMS-sidebar-content").children().removeClass('active');
    $("#" + itemID).addClass('active');
}

function sidebar_generator() {
    if (typeof(DWMS_sidebar_config) == 'undefined') {
        console.log("Error:var DWMS_sidebar_config Not Found.");
        return;
    }

    var grp_idx, itm_idx;
    var newHtml = "<div class=\"panel-group\" id=\"accordion\">";
    var tmpid = "";
    for (grp_idx in DWMS_sidebar_config.sidebar_groups) {
        newHtml += "<div class=\"panel panel-info\"><div class=\"panel-heading\" data-toggle=\"collapse\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapse_" + grp_idx + "\"><h4 class=\"panel-title\">" + DWMS_sidebar_config.sidebar_groups[grp_idx].sidebar_group_title + "</h4></div><div id=\"collapse_" + grp_idx + "\" class=\"panel-collapse collapse in\"><div class=\"panel-body\"><ul class=\"nav nav-pills nav-stacked DWMS-sidebar-content\">";

        for (itm_idx in DWMS_sidebar_config.sidebar_groups[grp_idx].sidebar_group_content) {
            tmpid = "sidebarItem_" + grp_idx + "_" + itm_idx;
            newHtml += "<li id=\"" + tmpid + "\"><a onclick=\"refresh_sidebar(\'" + tmpid + "\'); do_ajax(\'" + DWMS_sidebar_config.sidebar_groups[grp_idx].sidebar_group_content[itm_idx].url + "\')\">" + DWMS_sidebar_config.sidebar_groups[grp_idx].sidebar_group_content[itm_idx].name + "</a></li>"
        }

        newHtml += "</ul></div></div></div>";

    }
    newHtml += "</div>";
    // console.log(newHtml);
    $("#sidebar_div").html(newHtml);
}

sidebar_generator();

</script>
